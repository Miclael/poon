<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>GitHub 上傳工具</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    input, textarea, button { width: 100%; margin: 10px 0; padding: 10px; font-size: 16px; }
  </style>
</head>
<body>
  <h2>📤 GitHub 檔案上傳工具</h2>
  <label>GitHub Token：</label>
  <input type="password" id="token" placeholder="輸入你的 GitHub Token">

  <label>儲存庫名稱（使用者/儲存庫）：</label>
  <input type="text" id="repo" placeholder="例如：miclael/test-repo">

  <label>檔案名稱（含副檔名）：</label>
  <input type="text" id="filename" placeholder="例如：test.txt">

  <label>檔案內容：</label>
  <textarea id="content" rows="10" placeholder="在此輸入檔案內容..."></textarea>

  <button onclick="uploadFile()">📤 上傳檔案到 GitHub</button>

  <pre id="result"></pre>

  <script>
    async function uploadFile() {
      const token = document.getElementById("token").value;
      const repo = document.getElementById("repo").value;
      const filename = document.getElementById("filename").value;
      const content = document.getElementById("content").value;
      const result = document.getElementById("result");

      const apiUrl = `https://api.github.com/repos/${repo}/contents/${filename}`;

      const body = {
        message: `Upload ${filename}`,
        content: btoa(unescape(encodeURIComponent(content)))
      };

      const res = await fetch(apiUrl, {
        method: "PUT",
        headers: {
          "Authorization": `Bearer ${token}`,
          "Accept": "application/vnd.github+json"
        },
        body: JSON.stringify(body)
      });

      const data = await res.json();

      if (res.ok) {
        result.textContent = `✅ 上傳成功！網址：\n${data.content.html_url}`;
      } else {
        result.textContent = `❌ 發生錯誤：\n${JSON.stringify(data, null, 2)}`;
      }
    }
  </script>
</body>
</html>
