<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>GitHub ä¸Šå‚³å·¥å…·</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    input, textarea, button { width: 100%; margin: 10px 0; padding: 10px; font-size: 16px; }
  </style>
</head>
<body>
  <h2>ğŸ“¤ GitHub æª”æ¡ˆä¸Šå‚³å·¥å…·</h2>
  <label>GitHub Tokenï¼š</label>
  <input type="password" id="token" placeholder="è¼¸å…¥ä½ çš„ GitHub Token">

  <label>å„²å­˜åº«åç¨±ï¼ˆä½¿ç”¨è€…/å„²å­˜åº«ï¼‰ï¼š</label>
  <input type="text" id="repo" placeholder="ä¾‹å¦‚ï¼šmiclael/test-repo">

  <label>æª”æ¡ˆåç¨±ï¼ˆå«å‰¯æª”åï¼‰ï¼š</label>
  <input type="text" id="filename" placeholder="ä¾‹å¦‚ï¼štest.txt">

  <label>æª”æ¡ˆå…§å®¹ï¼š</label>
  <textarea id="content" rows="10" placeholder="åœ¨æ­¤è¼¸å…¥æª”æ¡ˆå…§å®¹..."></textarea>

  <button onclick="uploadFile()">ğŸ“¤ ä¸Šå‚³æª”æ¡ˆåˆ° GitHub</button>

  <pre id="result"></pre>

  <script>
    async function uploadFile() {
      const token = document.getElementById("token").value;
      const repo = document.getElementById("repo").value;
      const filename = document.getElementById("filename").value;
      const content = document.getElementById("content").value;
      const result = document.getElementById("result");

      const apiUrl = `https://api.github.com/repos/${repo}/contents/${filename}`;

      const body = {
        message: `Upload ${filename}`,
        content: btoa(unescape(encodeURIComponent(content)))
      };

      const res = await fetch(apiUrl, {
        method: "PUT",
        headers: {
          "Authorization": `Bearer ${token}`,
          "Accept": "application/vnd.github+json"
        },
        body: JSON.stringify(body)
      });

      const data = await res.json();

      if (res.ok) {
        result.textContent = `âœ… ä¸Šå‚³æˆåŠŸï¼ç¶²å€ï¼š\n${data.content.html_url}`;
      } else {
        result.textContent = `âŒ ç™¼ç”ŸéŒ¯èª¤ï¼š\n${JSON.stringify(data, null, 2)}`;
      }
    }
  </script>
</body>
</html>
