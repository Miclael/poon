<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>æ—©ç­ç”¢å‡ºå›å ±ï¼ˆiPhone å…§å»ºéµç›¤ï¼‹äººå·¥è¤‡è£½æ–¹æ¡ˆï¼‰</title>
<style>
  :root{
    --bg:#f7f7f7; --card:#fff; --text:#222; --muted:#666;
    --pri:#0a66ff; --pri-d:#084fc3; --bd:#dcdcdc;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"PingFang TC","Noto Sans TC",Arial;background:var(--bg);color:var(--text);padding:14px}
  h2{text-align:center;margin:4px 0 12px}
  .row{display:flex;align-items:center;gap:10px;background:var(--card);border:1px solid var(--bd);border-radius:10px;padding:10px 12px;margin:8px 0}
  .row label{flex:1;font-size:16px}
  .row input{flex:1;padding:10px;font-size:18px;text-align:center;border:1px solid var(--bd);border-radius:8px;background:#fff;outline:none}
  .row input:focus{border-color:var(--pri);box-shadow:0 0 0 3px rgba(10,102,255,.12)}
  .btn{width:100%;padding:12px;font-size:16px;font-weight:700;border:none;border-radius:10px;background:var(--pri);color:#fff;margin-top:12px}
  .btn:active{background:var(--pri-d)}
  .hint{font-size:13px;color:var(--muted);text-align:center;margin-top:6px}

  /* åº•éƒ¨é¢æ¿ï¼ˆé¿å…è¢«éµç›¤é ‚èµ·ï¼Œä½¿ç”¨ fixedï¼‰ */
  .sheet{position:fixed;left:0;right:0;bottom:0;background:#fff;border-top-left-radius:16px;border-top-right-radius:16px;box-shadow:0 -10px 30px rgba(0,0,0,.15);transform:translateY(100%);transition:transform .25s ease;z-index:50}
  .sheet.show{transform:translateY(0)}
  .sheet-hd{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid var(--bd)}
  .sheet-ttl{font-weight:800}
  .sheet-btn{border:none;background:#eee;border-radius:10px;padding:8px 12px}
  .sheet-bd{padding:10px 14px}
  .sheet-actions{display:flex;gap:10px;margin-top:10px}
  .sheet-actions button{flex:1;padding:12px;border:none;border-radius:10px;font-size:15px}
  .primary{background:var(--pri);color:#fff}
  .secondary{background:#eee}
  /* å¯é¸æ–‡å­—å€ï¼šç”¨ textareaï¼ŒiOS å¥½é•·æŒ‰ï¼›å­—ç´šåå¤§ */
  #resultBox{width:100%;height:230px;border:1px solid var(--bd);border-radius:10px;padding:10px;font-size:18px;line-height:1.6;resize:vertical}
</style>
</head>
<body>
  <h2 id="title">æ—©ç­ç”¢å‡ºå›å ±</h2>

  <!-- ä½¿ç”¨ iPhone å…§å»ºéµç›¤ï¼ˆå«å°æ•¸é»ï¼‰ -->
  <div class="row"><label>é‘½é¶</label><input type="text" inputmode="decimal" data-name="é‘½é¶" placeholder="æ•¸å­—æˆ–å°æ•¸"></div>
  <div class="row"><label>å…§A</label><input type="text" inputmode="decimal" data-name="å…§A" placeholder="æ•¸å­—æˆ–å°æ•¸"></div>
  <div class="row"><label>å…§V</label><input type="text" inputmode="decimal" data-name="å…§V" placeholder="æ•¸å­—æˆ–å°æ•¸"></div>
  <div class="row"><label>å…§æª¢</label><input type="text" inputmode="decimal" data-name="å…§æª¢" placeholder="æ•¸å­—æˆ–å°æ•¸"></div>
  <div class="row"><label>å¤–A</label><input type="text" inputmode="decimal" data-name="å¤–A" placeholder="æ•¸å­—æˆ–å°æ•¸"></div>
  <div class="row"><label>å¤–V</label><input type="text" inputmode="decimal" data-name="å¤–V" placeholder="æ•¸å­—æˆ–å°æ•¸"></div>
  <div class="row"><label>å¤–æª¢</label><input type="text" inputmode="decimal" data-name="å¤–æª¢" placeholder="æ•¸å­—æˆ–å°æ•¸"></div>
  <div class="row"><label>è£œç·š</label><input type="text" inputmode="decimal" data-name="è£œç·š" placeholder="æ•¸å­—æˆ–å°æ•¸"></div>
  <div class="row"><label>CAM</label><input type="text" inputmode="decimal" data-name="CAM" placeholder="æ•¸å­—æˆ–å°æ•¸"></div>

  <button class="btn" id="copyBtn">ğŸ“‹ è¤‡è£½çµæœ</button>
  <div class="hint">è‹¥è£ç½®é™åˆ¶å‰ªè²¼ç°¿ï¼Œæœƒæ”¹æˆã€Œé¡¯ç¤ºçµæœ â†’ å…¨é¸ â†’ é•·æŒ‰è¤‡è£½ã€ï¼›ä¹Ÿå¯ç”¨ã€Œåˆ†äº«ã€ã€‚</div>

  <!-- åº•éƒ¨é¢æ¿ï¼šé¡¯ç¤ºçµæœï¼Œæä¾›å…¨é¸ï¼åˆ†äº« -->
  <section class="sheet" id="sheet">
    <div class="sheet-hd">
      <div class="sheet-ttl">çµæœé è¦½</div>
      <button class="sheet-btn" id="closeSheet">é—œé–‰</button>
    </div>
    <div class="sheet-bd">
      <textarea id="resultBox" readonly aria-label="ç”¢å‡ºçµæœ"></textarea>
      <div class="sheet-actions">
        <button class="secondary" id="selectAllBtn">å…¨é¸</button>
        <button class="primary" id="shareBtn">ç³»çµ±åˆ†äº«</button>
      </div>
      <div class="hint" style="margin-top:8px">è‹¥ç„¡æ³•åˆ†äº«ï¼šè«‹å…ˆæŒ‰ã€Œå…¨é¸ã€â†’ åœ¨é¸å–ç¯„åœä¸Š <b>é•·æŒ‰</b> â†’ è¤‡è£½ã€‚</div>
    </div>
  </section>

<script>
(function setTodayTitle(){
  const now=new Date();
  document.getElementById('title').textContent=`${now.getMonth()+1}/${now.getDate()}æ—©ç­ç”¢å‡ºå›å ±`;
})();

function buildOutput(){
  const title=document.getElementById('title').textContent;
  const lines=[title];
  document.querySelectorAll('input[data-name]').forEach(inp=>{
    const val=(inp.value||'').trim();
    lines.push(`${inp.dataset.name} ${val}`);
    if(inp.dataset.name==='å…§æª¢') lines.push(''); // å…§æª¢å¾Œç©ºä¸€è¡Œ
  });
  return lines.join('\n');
}

// æ‰“é–‹/é—œé–‰åº•éƒ¨é¢æ¿
const sheet=document.getElementById('sheet');
const resultBox=document.getElementById('resultBox');
document.getElementById('closeSheet').addEventListener('click',()=>{sheet.classList.remove('show')});

// é¡¯ç¤ºçµæœï¼ˆä¸åšç¨‹å¼è¤‡è£½ï¼Œäº¤çµ¦ä½¿ç”¨è€…å‹•ä½œï¼‰
document.getElementById('copyBtn').addEventListener('click',()=>{
  resultBox.value = buildOutput();
  sheet.classList.add('show');
  // æ²åˆ°æœ€ä¸Šï¼Œé¿å…æœ‰æ™‚èšç„¦è¢«éµç›¤æ“‹ä½
  setTimeout(()=>{resultBox.scrollTop=0;},50);
});

// ä¸€éµå…¨é¸ï¼ˆiOS/Google App æœ€ç©©æ–¹å¼ï¼‰
document.getElementById('selectAllBtn').addEventListener('click',()=>{
  // è§£é™¤ readonly æ‰èƒ½é¸å–ç¯„åœï¼ˆé¸å®Œå†è¨­å›ï¼‰
  const wasRo = resultBox.hasAttribute('readonly');
  if(wasRo) resultBox.removeAttribute('readonly');
  resultBox.focus();
  resultBox.setSelectionRange(0, resultBox.value.length);
  // iOS æœ‰æ™‚éœ€è¦å†å‘¼å«ä¸€æ¬¡ç¢ºä¿é¸åˆ°
  setTimeout(()=>{
    resultBox.setSelectionRange(0, resultBox.value.length);
    if(wasRo) resultBox.setAttribute('readonly','');
  }, 0);
});

// ç³»çµ±åˆ†äº«ï¼ˆè‹¥è£ç½®æ”¯æ´ï¼‰
document.getElementById('shareBtn').addEventListener('click', async ()=>{
  const text = resultBox.value || buildOutput();
  try{
    if(navigator.share){
      await navigator.share({ text });
      return;
    }
    // è‹¥ä¸æ”¯æ´ shareï¼Œå°±å…ˆå…¨é¸ï¼Œæç¤ºé•·æŒ‰è¤‡è£½
    document.getElementById('selectAllBtn').click();
    alert('æ­¤ç€è¦½å™¨ä¸æ”¯æ´åˆ†äº«ï¼Œè«‹é•·æŒ‰é¸å–ç¯„åœé€²è¡Œè¤‡è£½ã€‚');
  }catch(_){
    // å¤±æ•—ä¹Ÿé€€å›å…¨é¸æŒ‡å¼•
    document.getElementById('selectAllBtn').click();
    alert('åˆ†äº«è¢«å–æ¶ˆæˆ–å¤±æ•—ï¼Œè«‹é•·æŒ‰é¸å–ç¯„åœé€²è¡Œè¤‡è£½ã€‚');
  }
});
</script>
</body>
</html>